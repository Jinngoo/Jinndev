window.__require=function t(e,o,n){function c(r,a){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){return c(e[r][1][t]||t)},l,l.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)c(n[r]);return c}({BaseUI:[function(t,e,o){"use strict";cc._RF.push(e,"9bc25AX6l5F757PNXDSOErF","BaseUI");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hidePrior=!1,e.destroyCallback=null,e}return n(e,t),e.prototype.onDestroy=function(){null!=this.destroyCallback&&this.destroyCallback(this)},e.prototype.onCover=function(){},e.prototype.onTop=function(){},e.prototype.onEscape=function(){return!0},c([a({tooltip:"\u662f\u5426\u9690\u85cf\u4e4b\u524d\u7684UI"})],e.prototype,"hidePrior",void 0),e=c([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],BattleCamera:[function(t,e,o){"use strict";cc._RF.push(e,"e7882Ma9lBFsZAEl6VdF0FE","BattleCamera");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e}return n(e,t),e.prototype.start=function(){},e.prototype.update=function(t){null!=this.camera&&(this.camera.y=this.node.y)},c([a(cc.Node)],e.prototype,"camera",void 0),e=c([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],BattleManager:[function(t,e,o){"use strict";cc._RF.push(e,"e3c13e7PNdK9pdd518XaNUl","BattleManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=t("./Map"),p=t("../util/CommonUtil"),l=t("./Player"),u=t("./BattleCamera"),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.content=null,e.mapLayer=null,e.entityLayer=null,e.map=null,e.player=null,e}var o;return n(e,t),o=e,e.Instance=function(){return this.instance},e.prototype.onLoad=function(){o.instance=this,this.content.active=!1},e.prototype.start=function(){},e.prototype.onDestroy=function(){o.instance=null},e.prototype.init=function(){this.content.active=!0;p.default.loadRes(["prefab/battle/Map1","prefab/battle/Player"],function(t,e){null==t?(this.loadMap(e[0]),this.loadPlayer(e[1])):cc.error(t)},this)},e.prototype.dispose=function(){this.content.active=!1,this.map.node.destroy(),this.map=null,this.player.node.destroy(),this.player=null},e.prototype.loadMap=function(t){var e=cc.instantiate(t);this.mapLayer.addChild(e),this.map=e.getComponent(s.default)},e.prototype.loadPlayer=function(t){var e=cc.instantiate(t);e.getComponent(u.default).camera=this.camera.node,this.entityLayer.addChild(e),this.player=e.getComponent(l.default),this.player.init(this.map._min,this.map._max)},e.instance=null,c([a(cc.Camera)],e.prototype,"camera",void 0),c([a(cc.Node)],e.prototype,"content",void 0),c([a(cc.Node)],e.prototype,"mapLayer",void 0),c([a(cc.Node)],e.prototype,"entityLayer",void 0),e=o=c([r],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../util/CommonUtil":"CommonUtil","./BattleCamera":"BattleCamera","./Map":"Map","./Player":"Player"}],BattleUI:[function(t,e,o){"use strict";cc._RF.push(e,"2e4fcCXW1xJIKaRxW6wXOFU","BattleUI");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,t("./base/BaseUI")),s=t("./base/UIManager"),p=t("../battle/BattleManager"),l=t("./common/ConfirmUI"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){s.default.Instance().add("prefab/ui/BattleUI",t,o)},e.prototype.start=function(){p.default.Instance().init()},e.prototype.onClickClose=function(){l.default.create("\u63d0\u793a","\u9000\u51fa\u6218\u6597",function(){this.node.destroy()},null,this)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),p.default.Instance().dispose()},e.prototype.onEscape=function(){return this.onClickClose(),!1},e=o=c([r],e)}(a.default);o.default=u,cc._RF.pop()},{"../battle/BattleManager":"BattleManager","./base/BaseUI":"BaseUI","./base/UIManager":"UIManager","./common/ConfirmUI":"ConfirmUI"}],CommonUtil:[function(t,e,o){"use strict";cc._RF.push(e,"06a51i1b8NIYrJFVSXWKbVo","CommonUtil"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../ui/common/DialogUI"),c=function(){function t(){}return t.instantiate=function(t,e,o){cc.loader.loadRes(t,cc.Prefab,function(c,i){var r=cc.instantiate(i);null!=e&&e.call(o,c,r),null!=c&&(cc.error(c),t!=n.default.PATH&&n.default.create("\u63d0\u793a","\u52a0\u8f7d'"+t+"'\u51fa\u9519"))})},t.loadRes=function(t,e,o){cc.loader.loadResArray(t,cc.Asset,function(t,n){null!=e&&e.call(o,t,n),null!=t&&cc.error(t)})},t.clamp=function(t,e,o){return t.x=Math.max(e.x,t.x),t.x=Math.min(o.x,t.x),t.y=Math.max(e.y,t.y),t.y=Math.min(o.y,t.y),t},t}();o.default=c,cc._RF.pop()},{"../ui/common/DialogUI":"DialogUI"}],ConfirmUI:[function(t,e,o){"use strict";cc._RF.push(e,"ecb77poFXlM47KglOlgxsZ2","ConfirmUI");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=t("../base/BaseUI"),p=t("../base/UIManager"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelContent=null,e.labelYes=null,e.labelNo=null,e._onConfirm=null,e._onCancel=null,e._callback=null,e._context=null,e}var o;return n(e,t),o=e,e.create=function(t,e,n,c,i){p.default.Instance().addTop(this.PATH,function(o,r){null!=r&&r.init(t,e,n,c,i)},o)},e.prototype.init=function(t,e,o,n,c){this._onConfirm=o,this._onCancel=n,this._context=c,"object"==typeof this._onCancel&&null==this._context&&(this._context=this._onCancel,this._onCancel=null),this.labelTitle.string=t,this.labelContent.string=e},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),null!=this._callback&&this._callback.call(this._context)},e.prototype.onClickConfirm=function(){this._callback=this._onConfirm,this.node.destroy()},e.prototype.onClickCancel=function(){this._callback=this._onCancel,this.node.destroy()},e.prototype.onEscape=function(){return this._callback=this._onCancel,!0},e.PATH="prefab/ui/common/ConfirmUI",c([a(cc.Label)],e.prototype,"labelTitle",void 0),c([a(cc.Label)],e.prototype,"labelContent",void 0),c([a(cc.Label)],e.prototype,"labelYes",void 0),c([a(cc.Label)],e.prototype,"labelNo",void 0),e=o=c([r],e)}(s.default);o.default=l,cc._RF.pop()},{"../base/BaseUI":"BaseUI","../base/UIManager":"UIManager"}],DialogUI:[function(t,e,o){"use strict";cc._RF.push(e,"a6668HDVHFOirv1o9VhTwWO","DialogUI");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=t("../base/BaseUI"),p=t("../base/UIManager"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelTitle=null,e.labelContent=null,e.labelYes=null,e._callback=null,e._context=null,e}var o;return n(e,t),o=e,e.create=function(t,e,n,c){p.default.Instance().addTop(this.PATH,function(o,i){null!=i&&i.init(t,e,n,c)},o)},e.prototype.init=function(t,e,o,n){this._callback=o,this._context=n,"object"==typeof this._callback&&null==this._context&&(this._context=this._callback,this._callback=null),this.labelTitle.string=t,this.labelContent.string=e},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),null!=this._callback&&this._callback.call(this._context)},e.prototype.onClickClose=function(){this.node.destroy()},e.PATH="prefab/ui/common/DialogUI",c([a(cc.Label)],e.prototype,"labelTitle",void 0),c([a(cc.Label)],e.prototype,"labelContent",void 0),c([a(cc.Label)],e.prototype,"labelYes",void 0),e=o=c([r],e)}(s.default);o.default=l,cc._RF.pop()},{"../base/BaseUI":"BaseUI","../base/UIManager":"UIManager"}],GameManager:[function(t,e,o){"use strict";cc._RF.push(e,"f21d9s7lj1K7qrfv4/w0akV","GameManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=t("./ui/MainUI"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}var o;return n(e,t),o=e,e.Instance=function(){return this.instance},e.prototype.onLoad=function(){o.instance=this},e.prototype.start=function(){s.default.create(function(t,e){})},e.instance=null,c([a(cc.Label)],e.prototype,"label",void 0),e=o=c([r],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./ui/MainUI":"MainUI"}],JoystickEnum:[function(t,e,o){"use strict";cc._RF.push(e,"93c157AJ4BBYrpwXcq7w73C","JoystickEnum"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={JoystickType:cc.Enum({FIXED:0,FOLLOW:1}),DirectionType:cc.Enum({FOUR:4,EIGHT:8,ALL:0}),SpeedType:cc.Enum({STOP:0,NORMAL:1,FAST:2}),JoystickEventType:cc.Enum({TOUCH_START:"touchStart",TOUCH_MOVE:"touchMove",TOUCH_END:"touchEnd",CHANGE_JOYSTICK_TYPE:"changeJoystickType"})},cc._RF.pop()},{}],JoystickEvent:[function(t,e,o){"use strict";cc._RF.push(e,"1347b3ZeYdNi5e2GJQt/v5i","JoystickEvent");var n=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,i=c.ccclass,r=c.property,a=function(){function t(){this._event=new cc.EventTarget}var e;return e=t,t.getInstance=function(){return!this._instance&&(this._instance=new e),this._instance},t.prototype.on=function(t,e,o){this._event.on(t,e,o)},t.prototype.off=function(t,e,o){this._event.off(t,e,o)},t.prototype.emit=function(t){for(var e,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];(e=this._event).emit.apply(e,[t].concat(o))},t._instance=null,n([r(cc.EventTarget)],t.prototype,"_event",void 0),t=e=n([i],t)}();o.default=a,cc._RF.pop()},{}],Joystick:[function(t,e,o){"use strict";cc._RF.push(e,"3df80leuRNPwq+TB48jwCyt","Joystick");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=t("./JoystickEnum"),p=t("./JoystickEvent"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dot=null,e.ring=null,e.joystickType=s.default.JoystickType.FIXED,e.directionType=s.default.DirectionType.ALL,e._stickPos=null,e._touchLocation=null,e._radius=0,e}return n(e,t),e.prototype.onLoad=function(){this._radius=this.ring.width/2,this._initTouchEvent(),this.joystickType===s.default.JoystickType.FOLLOW&&(this.node.opacity=0)},e.prototype.onEnable=function(){p.default.getInstance().on(s.default.JoystickEventType.CHANGE_JOYSTICK_TYPE,this._onChangeJoystickType,this)},e.prototype.onDisable=function(){p.default.getInstance().off(s.default.JoystickEventType.CHANGE_JOYSTICK_TYPE,this._onChangeJoystickType,this)},e.prototype._onChangeJoystickType=function(t){this.joystickType=t,this.node.opacity=t===s.default.JoystickType.FIXED?255:0},e.prototype._initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},e.prototype._touchStartEvent=function(t){p.default.getInstance().emit(s.default.JoystickEventType.TOUCH_START,"joystick touch start",10);var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.joystickType===s.default.JoystickType.FIXED){this._stickPos=this.ring.getPosition();var o=e.sub(this.ring.getPosition()).mag();this._radius>o&&this.dot.setPosition(e)}else this.joystickType===s.default.JoystickType.FOLLOW&&(this._stickPos=e,this.node.opacity=255,this._touchLocation=t.getLocation(),this.ring.setPosition(e),this.dot.setPosition(e))},e.prototype._touchMoveEvent=function(t){if(this.joystickType===s.default.JoystickType.FOLLOW&&this._touchLocation===t.getLocation())return!1;var e,o=this.ring.convertToNodeSpaceAR(t.getLocation()),n=o.mag(),c=this._stickPos.x+o.x,i=this._stickPos.y+o.y,r=cc.v2(c,i).sub(this.ring.getPosition()).normalize();if(this._radius>n)this.dot.setPosition(cc.v2(c,i)),e=s.default.SpeedType.NORMAL;else{var a=this._stickPos.x+r.x*this._radius,l=this._stickPos.y+r.y*this._radius;this.dot.setPosition(cc.v2(a,l)),e=s.default.SpeedType.FAST}p.default.getInstance().emit(s.default.JoystickEventType.TOUCH_MOVE,t,{speedType:e,moveDistance:r})},e.prototype._touchEndEvent=function(t){this.dot.setPosition(this.ring.getPosition()),this.joystickType===s.default.JoystickType.FOLLOW&&(this.node.opacity=0),p.default.getInstance().emit(s.default.JoystickEventType.TOUCH_END,t,{speedType:s.default.SpeedType.STOP})},c([a({type:cc.Node,displayName:"Dot",tooltip:"\u6447\u6746\u64cd\u7eb5\u70b9"})],e.prototype,"dot",void 0),c([a({type:cc.Node,displayName:"Ring",tooltip:"\u6447\u6746\u80cc\u666f\u8282\u70b9"})],e.prototype,"ring",void 0),c([a({type:s.default.JoystickType,displayName:"Touch Type",tooltip:"\u89e6\u6478\u7c7b\u578b"})],e.prototype,"joystickType",void 0),c([a({type:s.default.DirectionType,displayName:"Direction Type",tooltip:"\u65b9\u5411\u7c7b\u578b"})],e.prototype,"directionType",void 0),c([a({type:cc.Node,tooltip:"\u6447\u6746\u6240\u5728\u4f4d\u7f6e"})],e.prototype,"_stickPos",void 0),c([a({type:cc.Node,tooltip:"\u89e6\u6478\u4f4d\u7f6e"})],e.prototype,"_touchLocation",void 0),e=c([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./JoystickEnum":"JoystickEnum","./JoystickEvent":"JoystickEvent"}],MainUI:[function(t,e,o){"use strict";cc._RF.push(e,"0eb53+M79FDh7o0T5xd73HG","MainUI");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=(i.property,t("./base/BaseUI")),s=t("./base/UIManager"),p=t("./BattleUI"),l=t("./common/ConfirmUI"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.create=function(t){s.default.Instance().add("prefab/ui/MainUI",t,o)},e.prototype.start=function(){},e.prototype.onClickStart=function(t,e){p.default.create()},e.prototype.onCover=function(){},e.prototype.onTop=function(){},e.prototype.onEscape=function(){return l.default.create("\u63d0\u793a","\u9000\u51fa\u6e38\u620f",function(){},this),!1},e=o=c([r],e)}(a.default);o.default=u,cc._RF.pop()},{"./BattleUI":"BattleUI","./base/BaseUI":"BaseUI","./base/UIManager":"UIManager","./common/ConfirmUI":"ConfirmUI"}],Map:[function(t,e,o){"use strict";cc._RF.push(e,"f165apQLFRNoqAVUu4TjoX4","Map");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.battleField=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this.battleField.position,e=new cc.Vec2(this.battleField.width/2,this.battleField.height/2);this._min=new cc.Vec2(t.x-e.x,t.y-e.y),this._max=new cc.Vec2(t.x+e.x,t.y+e.y)},c([a(cc.Node)],e.prototype,"battleField",void 0),e=c([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"82bbdyTGd5NZIXp1fdqPOkm","Player");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=t("../../plugins/joystick/JoystickEnum"),p=t("../../plugins/joystick/JoystickEvent"),l=t("../util/CommonUtil"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveDir=cc.v2(0,1),e._speedType=s.default.SpeedType.STOP,e._moveSpeed=0,e.stopSpeed=0,e.normalSpeed=100,e.fastSpeed=200,e._min=new cc.Vec2(0,0),e._max=new cc.Vec2(0,0),e._initialized=!1,e}return n(e,t),e.prototype.onLoad=function(){p.default.getInstance().on(s.default.JoystickEventType.TOUCH_START,this.onTouchStart,this),p.default.getInstance().on(s.default.JoystickEventType.TOUCH_MOVE,this.onTouchMove,this),p.default.getInstance().on(s.default.JoystickEventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.init=function(t,e){this._min=t,this._max=e,this._initialized=!0},e.prototype.onDestroy=function(){p.default.getInstance().off(s.default.JoystickEventType.TOUCH_START,this.onTouchStart,this),p.default.getInstance().off(s.default.JoystickEventType.TOUCH_MOVE,this.onTouchMove,this),p.default.getInstance().off(s.default.JoystickEventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.onTouchStart=function(){this._initialized},e.prototype.onTouchMove=function(t,e){this._initialized&&(this._speedType=e.speedType,this.moveDir=e.moveDistance)},e.prototype.onTouchEnd=function(t,e){this._initialized&&(this._speedType=e.speedType)},e.prototype.move=function(){this.node.angle=cc.misc.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))-90;var t=this.moveDir.mul(this._moveSpeed/120),e=this.node.position.add(new cc.Vec3(t.x,t.y,0));e=l.default.clamp(e,this._min,this._max),this.node.setPosition(e)},e.prototype.update=function(t){if(this._initialized){switch(this._speedType){case s.default.SpeedType.STOP:this._moveSpeed=this.stopSpeed;break;case s.default.SpeedType.NORMAL:this._moveSpeed=this.normalSpeed;break;case s.default.SpeedType.FAST:this._moveSpeed=this.fastSpeed}this.move()}},c([a({displayName:"Move Dir",tooltip:"\u79fb\u52a8\u65b9\u5411"})],e.prototype,"moveDir",void 0),c([a({displayName:"Speed Type",type:s.default.SpeedType,tooltip:"\u901f\u5ea6\u7ea7\u522b"})],e.prototype,"_speedType",void 0),c([a({displayName:"Move Speed",tooltip:"\u79fb\u52a8\u901f\u5ea6"})],e.prototype,"_moveSpeed",void 0),c([a({type:cc.Integer,tooltip:"\u505c\u6b62\u65f6\u901f\u5ea6"})],e.prototype,"stopSpeed",void 0),c([a({type:cc.Integer,tooltip:"\u6b63\u5e38\u901f\u5ea6"})],e.prototype,"normalSpeed",void 0),c([a({type:cc.Integer,tooltip:"\u6700\u5feb\u901f\u5ea6"})],e.prototype,"fastSpeed",void 0),e=c([r],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../plugins/joystick/JoystickEnum":"JoystickEnum","../../plugins/joystick/JoystickEvent":"JoystickEvent","../util/CommonUtil":"CommonUtil"}],UIManager:[function(t,e,o){"use strict";cc._RF.push(e,"0e867dVmuNFN4TodHpzipdV","UIManager");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),c=this&&this.__decorate||function(t,e,o,n){var c,i=arguments.length,r=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(c=t[a])&&(r=(i<3?c(r):i>3?c(e,o,r):c(e,o))||r);return i>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,a=i.property,s=t("./BaseUI"),p=t("../common/DialogUI"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bottom=null,e.center=null,e.top=null,e}var o;return n(e,t),o=e,e.Instance=function(){return this.instance},e.prototype.onLoad=function(){o.instance=this,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.add=function(t,e,o){this.instantiate(t,this.center,e,o)},e.prototype.addTop=function(t,e,o){this.instantiate(t,this.top,e,o)},e.prototype.addBottom=function(t,e,o){this.instantiate(t,this.bottom,e,o)},e.prototype.instantiate=function(t,e,o,n){var c=this;cc.loader.loadRes(t,cc.Prefab,function(i,r){if(null!=i)return cc.error(i),o(i,null),void(t!=p.default.PATH&&p.default.create("\u63d0\u793a","\u52a0\u8f7d'"+t+"'\u51fa\u9519"));var a=cc.instantiate(r);c.AddTo(a,e),null!=o&&o(i,null!=n?a.getComponent(n):a)})},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.back:case cc.macro.KEY.escape:this.onEscape()}},e.prototype.AddTo=function(t,e){e.addChild(t);var o=t.getComponent(s.default);if(null!=o&&(o.destroyCallback=this.OnLayerDestroy.bind(this),o.hidePrior&&this.TogglePriors(e,!1)),e.childrenCount>1){var n=e.children[e.childrenCount-2].getComponent(s.default);null!=n&&n.onCover()}},e.prototype.OnLayerDestroy=function(t){if(t.hidePrior){var e=t.node.parent;if(this.TogglePriors(e,!0),e.childrenCount>1){var o=e.children[e.childrenCount-2].getComponent(s.default);null!=o&&o.onTop()}}},e.prototype.TogglePriors=function(t,e){for(var o=t.childrenCount-2;o>=0;o--){var n=t.children[o];n.active=e;var c=n.getComponent(s.default);if(null!=c&&c.hidePrior)break}},e.prototype.onEscape=function(){var t=this.findToppest();null!=t&&t.onEscape()&&t.node.destroy()},e.prototype.findToppest=function(){for(var t=this.top.childrenCount-1;t>=0;t--){if(null!=(e=this.top.children[t].getComponent(s.default)))return e}for(t=this.center.childrenCount-1;t>=0;t--){if(null!=(e=this.center.children[t].getComponent(s.default)))return e}for(t=this.bottom.childrenCount-1;t>=0;t--){var e;if(null!=(e=this.bottom.children[t].getComponent(s.default)))return e}return null},e.instance=null,c([a(cc.Node)],e.prototype,"bottom",void 0),c([a(cc.Node)],e.prototype,"center",void 0),c([a(cc.Node)],e.prototype,"top",void 0),e=o=c([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../common/DialogUI":"DialogUI","./BaseUI":"BaseUI"}],cloud:[function(t,e,o){"use strict";cc._RF.push(e,"f9929JSAYhKR7C34dP6eiBH","cloud"),cc.cloud={initialized:!1,initialize:function(t){return void 0!==t&&null!==t||(t=cc_cloud_commonConfig),"tencent"===t.platform?this.initialized?this.tencentApp:(tcb&&tcb.useAdapters(window.adapter),this.tencentApp=tcb?tcb.init(t.tencent):null,this.initialized=!0,this.tencentApp):null}},cc._RF.pop()},{}]},{},["cloud","Joystick","JoystickEnum","JoystickEvent","GameManager","BattleCamera","BattleManager","Map","Player","BattleUI","MainUI","BaseUI","UIManager","ConfirmUI","DialogUI","CommonUtil"]);